<%- include('partials/header') %>

<div class="row">
  <div class="col-lg-5">
    <img src="<%= drink.strDrinkThumb %>" class="img-fluid rounded mb-3" alt="<%= drink.strDrink %>">
  </div>
  <div class="col-lg-7">
    <h1 class="mb-1"><%= drink.strDrink %></h1>
    <p class="text-muted mb-3"><%= drink.strAlcoholic %> • <%= drink.strCategory %> • <%= drink.strGlass %></p>

    <h2 class="h5">Ingredients</h2>
    <ul>
      <% drink.ingredients.forEach(it => { %>
        <li><%= it.measure ? it.measure + ' ' : '' %><%= it.ingredient %></li>
      <% }) %>
    </ul>

    <h2 class="h5 mt-3">Instructions</h2>
    <p><%= drink.strInstructions %></p>

    <h2 class="h5 mt-4">Suggested food pairings</h2>

    <% if (typeof pairingRule !== 'undefined' && pairingRule) { %>
      <p class="text-muted">
        Paired via:
        <strong>
          <%= pairingRule.type === 'area' ? pairingRule.value + ' cuisine' : pairingRule.value + ' dishes' %>
        </strong>
      </p>
    <% } %>

    <% if (typeof meals !== 'undefined' && meals.length) { %>
      <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">
        <% meals.forEach(m => { %>
          <div class="col">
            <div class="card h-100">
              <img src="<%= m.strMealThumb %>" loading="lazy" class="card-img-top" alt="<%= m.strMeal %>">
              <div class="card-body d-flex flex-column">
                <h6 class="card-title"><%= m.strMeal %></h6>
                <a class="mt-auto btn btn-sm btn-outline-primary"
                   href="https://www.themealdb.com/meal/<%= m.idMeal %>"
                   target="_blank" rel="noopener noreferrer">
                  View Recipe
                </a>
              </div>
            </div>
          </div>
        <% }) %>
      </div>
    <% } else { %>
      <p class="text-muted">No matching food pairings found right now.</p>
    <% } %>

    <div class="mt-4">
      <a href="/" class="btn btn-outline-secondary">Back</a>
      <a href="/random" class="btn btn-primary">Another Random</a>
    </div>
  </div>
</div>

<%- include('partials/footer') %>
